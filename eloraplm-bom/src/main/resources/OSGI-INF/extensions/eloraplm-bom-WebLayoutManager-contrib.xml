<?xml version="1.0" encoding="UTF-8"?>

<component name="com.aritu.eloraplm.bom.WebLayoutManager.contrib">

  <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager" point="layouts">

    <!--  New layout for displaying document type, bom item, bom classification,
              and description in summary tab -->
    <layout name="summary_current_bom_document_types_and_description">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml
        </template>
      </templates>
      <rows>
        <row>
          <widget>type_icon_and_text</widget>
        </row>
        <row>
          <widget>bomItemType</widget>
        </row>
        <row>
          <widget>bomPartClassification</widget>
        </row>
        <row>
          <widget>description_if_schema_dc</widget>
        </row>
        <row>
          <widget>bomToolClassification</widget>
        </row>
        <row>
          <widget>bomPackagingClassification</widget>
        </row>
        <row>
          <widget>bomSpecificationClassification</widget>
        </row>
        <row>
          <widget>bomProdClassification</widget>
        </row>
      </rows>
    </layout>

    <layout name="bom_item">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml
        </template>
      </templates>
      <rows>
        <row>
          <widget>bomItemType</widget>
        </row>
        <row>
          <widget>bomItemResponsible</widget>
        </row>
      </rows>
    </layout>
    
    <layout name="summary_bom_item">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml
        </template>
      </templates>
      <rows>
        <row>
          <widget>bomItemResponsible</widget>
        </row>
        <row>
          <widget>containerEstimatedCostAndUnit</widget>
        </row>
      </rows>
    </layout>
    
    <layout name="bom_dublincore">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml
        </template>
      </templates>
      <rows>
        <row>
          <widget>expired</widget>
        </row>
        <!--
        <row>
          <widget>subjects</widget>
        </row>
         -->
        <row>
          <widget>rights</widget>
        </row>
      </rows>
    </layout>

    <layout name="bom_part">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml
        </template>
      </templates>
      <rows>
        <row>
          <widget>bomPartClassification</widget>
        </row>
        <row>
          <widget>bomPartUnit</widget>
        </row>
        <row>
          <widget>bomPartMaterial</widget>
        </row>
        <row>
          <widget>bomPartMass</widget>
        </row>
        <row>
          <widget>bomPartVolume</widget>
        </row>
        <!--
        <row>
          <widget>bomPartSurface</widget>
        </row>
        -->
        <row>
          <widget>bomPartSource</widget>
        </row>
        <row>
          <widget>bomPartStandard</widget>
        </row>
        <row>
          <widget>containerEstimatedCostAndUnit</widget>
        </row>
        <row>
          <widget>bomPartEffectiveDate</widget>
        </row>
      </rows>
    </layout>
    
    <layout name="summary_bom_part">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml
        </template>
      </templates>
      <rows>
        <row>
          <widget>bomPartMaterial</widget>
        </row>
        <row>
          <widget>bomPartUnit</widget>
        </row>
        <row>
          <widget>bomPartSource</widget>
        </row>
        <row>
          <widget>bomPartMass</widget>
        </row>
        <row>
          <widget>bomPartVolume</widget>
        </row>
        <!--
        <row>
          <widget>bomPartSurface</widget>
        </row>
        -->
        <row>
          <widget>bomPartStandard</widget>
        </row>
        <row>
          <widget>bomPartEffectiveDate</widget>
        </row>
      </rows>
    </layout>

    <layout name="bom_product">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml
        </template>
      </templates>
      <rows>       
        <row>
          <widget>bomProdClassification</widget>
        </row>
        <row>
          <widget>bomProdUnit</widget>
        </row>
        <row>
          <widget>bomProdExternalReleaseNumber</widget>
        </row>
        <row>
          <widget>bomProdExternalVersionNumber</widget>
        </row>
        <row>
          <widget>containerEstimatedCostAndUnit</widget>
        </row>
      </rows>
    </layout>
    
    <layout name="summary_bom_product">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml
        </template>
      </templates>
      <rows>
        <row>
          <widget>bomProdUnit</widget>
        </row>
        <row>
          <widget>bomProdExternalReleaseNumber</widget>
        </row>
        <row>
          <widget>bomProdExternalVersionNumber</widget>
        </row>
      </rows>
    </layout>
    
    <layout name="bom_tool">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml
        </template>
      </templates>
      <rows>
        <row>
          <widget>bomToolClassification</widget>
        </row>
      </rows>
    </layout>

    <layout name="bom_packaging">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml
        </template>
      </templates>
      <rows>
        <row>
          <widget>bomPackagingClassification</widget>
        </row>
      </rows>
    </layout>

    <layout name="bom_specification">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml
        </template>
      </templates>
      <rows>
        <row>
          <widget>bomSpecificationClassification</widget>
        </row>
      </rows>
    </layout>
    
    <layout name="bom_manufacturer_part">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml
        </template>
      </templates>
      <rows>
        <row>
          <widget>bomManpartResponsible</widget>
        </row>
        <row>
          <widget>bomManpartManufacturer</widget>
          <widget>bomManpartManufacturerReference</widget>
        </row>
      </rows>
    </layout> 

    <layout name="bom_customer_product">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml
        </template>
      </templates>
      <rows>
        <row>
          <widget>bomCustprodResponsible</widget>
        </row>
        <row>          
          <widget>bomCustprodCustomer</widget>
          <widget>bomCustprodCustomerReference</widget>
        </row>
      </rows>
    </layout>     
    
    <!-- treetable layouts -->
    
    <layout name="bom_composition_treetable">
      <templates>
        <template mode="any">/layouts/layout_treetable_template.xhtml
        </template>
      </templates>
      <columns>
        <column name="icon_reference_title">
          <properties mode="any">
            <property name="columnHeading">label.content.header.title</property>
          </properties>
          <widget>treewidget_bom_icon_reference_title</widget>
        </column>
        <column name="bom_classification">
            <properties mode="any">
                <property name="columnStyle">width: 20%;</property>
                <property name="columnStyleClass">ellipsisWhenOverflow</property>
                <property name="columnHeading">eloraplm.label.bomClassification</property>
            </properties>
            <widget>listing_bom_classification</widget>
        </column>
        <column name="download_link">
                <properties mode="any">
                    <property name="columnStyle">width: 40px;</property>
                    <property name="columnStyleClass">alignCenter</property>
                </properties>
                <widget>listing_viewer_file_download_link</widget>
        </column>
        <column name="lock">
                <properties mode="any">
                    <property name="columnStyle">width: 40px;</property>
                    <property name="columnStyleClass">alignCenter</property>
                </properties>
                <widget>treewidget_lock_icon</widget>
        </column>
        <column name="version">
            <properties mode="any">
                <property name="columnStyle">width: 7em;</property>
                <property name="columnHeading">label.version</property>
            </properties>
            <widget>treewidget_version_wc_av</widget>
        </column>
        <column name="lifecycle_state">
            <properties mode="any">
                <property name="columnStyle">width: 9em;</property>
                <property name="columnHeading">label.lifecycle</property>
            </properties>
            <widget>listing_colored_lifecycle_state</widget>
        </column>
        <column name="quantity">
            <properties mode="any">
                <property name="columnStyle">width: 6em;</property>
                <property name="columnHeading">label.content.header.quantity</property>
            </properties>
            <widget>listing_quantity</widget>
        </column>
<!--         <column name="ordering"> -->
<!--             <properties mode="any"> -->
<!--                 <property name="columnStyle">width: 6em;</property> -->
<!--                 <property name="columnHeading">eloraplm.label.ordering</property> -->
<!--             </properties> -->
<!--             <widget>listing_ordering</widget> -->
<!--         </column> -->
        <column name="remove">
            <properties mode="any">
                <property name="columnStyle">width: 40px;</property>
                <property name="columnStyleClass">alignCenter</property>
            </properties>
            <widget>bom_composition_ebom_remove_relation</widget>
        </column>
      </columns>
      <properties mode="any">
        <property name="headerFiltersTemplate">/incl/bom_relation_header_filters.xhtml</property>
        <property name="tableTitle">title.treetable.bomComposition</property>
        <property name="tableStyle">table-layout: auto;</property>
        <property name="showButtons">true</property>
        <property name="isEditable">true</property>
        <property name="isSortable">true</property>
        <property name="sortBy">ordering</property>
        <property name="sortOrder">ascending</property>
      </properties>
    </layout>
    
    <layout name="bom_where_used_treetable">
      <templates>
        <template mode="any">/layouts/layout_treetable_template.xhtml
        </template>
      </templates>
      <columns>
        <column name="icon_reference_title">
          <properties mode="any">
            <property name="columnHeading">label.content.header.title</property>
          </properties>
          <widget>treewidget_bom_icon_reference_title</widget>
        </column>
        <column name="bom_classification">
            <properties mode="any">
                <property name="columnStyle">width: 20%;</property>
                <property name="columnStyleClass">ellipsisWhenOverflow</property>
                <property name="columnHeading">eloraplm.label.bomClassification</property>
            </properties>
            <widget>listing_bom_classification</widget>
        </column>
        <column name="download_link">
                <properties mode="any">
                    <property name="columnStyle">width: 40px;</property>
                    <property name="columnStyleClass">alignCenter</property>
                </properties>
                <widget>listing_viewer_file_download_link</widget>
        </column>
        <column name="lock">
                <properties mode="any">
                    <property name="columnStyle">width: 40px;</property>
                    <property name="columnStyleClass">alignCenter</property>
                </properties>
                <widget>treewidget_lock_icon</widget>
        </column>
        <column name="version">
            <properties mode="any">
                <property name="columnStyle">width: 7em;</property>
                <property name="columnHeading">label.version</property>
            </properties>
            <widget>treewidget_version_wc_av</widget>
        </column>
        <column name="lifecycle_state">
            <properties mode="any">
                <property name="columnStyle">width: 9em;</property>
                <property name="columnHeading">label.lifecycle</property>
            </properties>
            <widget>listing_colored_lifecycle_state</widget>
        </column>
        <column name="quantity">
            <properties mode="any">
                <property name="columnStyle">width: 6em;</property>
                <property name="columnHeading">label.content.header.quantity</property>
            </properties>
            <widget>listing_quantity</widget>
        </column>
      </columns>
      <properties mode="any">
        <property name="headerFiltersTemplate">/incl/bom_relation_header_filters.xhtml</property>
        <property name="tableTitle">title.treetable.bomWhereUsed</property>
        <property name="tableStyle">table-layout: auto;</property>
        <property name="showButtons">true</property>
        <property name="isEditable">false</property>
        <property name="isSortable">false</property>
      </properties>
    </layout>

    <!-- end of treetable layouts -->
        
  </extension>


    <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager" point="widgets">
    <!--  New widget for displaying document type, BOM item type, classification and description in summary -->
    <widget name="summary_current_bom_document_types_and_description" type="summary_current_bom_document_types_and_description">
      <labels>
        <label mode="any"/>
      </labels>
    </widget>
        
    <widget name="bomItemType" type="suggestOneDirectory">
      <labels>
        <label mode="any">label.widget.bomitem.itemType</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bomitem:bomItemType</field>
      </fields>
      <widgetModes>
         <mode value="view_summary">#{currentDocument.hasSchema('bom_item')?'view':'hidden'}</mode>
      </widgetModes>
      <properties widgetMode="any">
        <property name="directoryName">elora_bomItemTypes</property>
        <property name="required">false</property>
      </properties>
    </widget>
    
    <widget name="bomItemResponsible" type="singleUserSuggestion">
      <labels>
        <label mode="any">label.widget.bomitem.responsible</label>
      </labels>
      <fields>
        <field>bomitem:responsible</field>
      </fields>
      <properties mode="any">
        <property name="userSuggestionSearchType">USER_TYPE</property>
        <property name="minChars">1</property>
      </properties>
    </widget>
    
    <!-- 
    <widget name="bomItemEstimatedCostAndUnit" type="template">
      <labels>
        <label mode="any">label.widget.bomitem.estimatedCost</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bomitem:estimatedCost</field>
        <field>bomitem:costUnit</field>
      </fields>
      <properties mode="any">
        <property name="directoryName">elora_units_of_measure</property>
        <property name="template">
          /widgets/bom_item_estimated_cost_and_unit_widget.xhtml
        </property>
      </properties>
    </widget>
     -->
     
    <widget name="containerEstimatedCostAndUnit" type="container">
      <labels>
        <label mode="any">label.widget.bomitem.estimatedCost</label>
      </labels>
      <translated>true</translated>
      <properties mode="any">
        <property name="hideSubLabels">true</property>
        <property name="display">inline</property>
      </properties>
      <subWidgets>
	      <widget name="bomItemEstimatedCost" type="double">
		      <labels>
	          <label mode="any"></label>
	        </labels>
	        <fields>
	          <field>bomitem:estimatedCost</field>
	        </fields>
	        <properties widgetMode="any">
            <property name="style">width:50%</property>
          </properties>
	      </widget>
	      <widget name="bomItemCostUnit" type="suggestOneDirectory">
	        <labels>
            <label mode="any"></label>
          </labels>
	        <fields>
	          <field>bomitem:costUnit</field>
	        </fields>
	        <properties widgetMode="any">
		        <property name="directoryName">elora_currency</property>
		        <property name="required">false</property>
		        <property name="width">40%</property>
		      </properties>
	      </widget>
	    </subWidgets>
	  </widget>
      
    
    <!-- 
    <widget name="bomItemEstimatedCost" type="double">
      <labels>
        <label mode="any">label.widget.bomitem.estimatedCost</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bomitem:estimatedCost</field>
      </fields>
    </widget>
    
    <widget name="bomItemCostUnit" type="text">
      <labels>
        <label mode="any">label.widget.bomitem.costUnit</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bomitem:costUnit</field>
      </fields>
    </widget>
     -->
    <widget name="bomPartClassification" type="suggestOneDirectory">
      <labels>
        <label mode="any">label.widget.bompart.partClassification</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bompart:partClassification</field>
      </fields>
      <widgetModes>
         <mode value="view_summary">#{currentDocument.hasSchema('bom_part')?'view':'hidden'}</mode>
      </widgetModes>
      <properties widgetMode="any">
        <property name="directoryName">elora_bomPartClassHierarchical</property>
        <property name="required">false</property>
      </properties>
    </widget>
    
    <widget name="bomPartMaterial" type="text">
      <labels>
        <label mode="any">label.widget.bompart.material</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bompart:material</field>
      </fields>
    </widget>
    
    <widget name="bomPartUnit" type="suggestOneDirectory">
      <labels>
        <label mode="any">label.widget.bompart.unit</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bompart:unit</field>
      </fields>
      <properties widgetMode="any">
        <property name="directoryName">elora_units_of_measure</property>
        <property name="required">false</property>
      </properties>
    </widget>
    
    
    <widget name="bomPartSource" type="suggestOneDirectory">
      <labels>
        <label mode="any">label.widget.bompart.source</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bompart:source</field>
      </fields>
      <properties widgetMode="any">
        <property name="directoryName">elora_bomSource</property>
        <property name="required">false</property>
      </properties>
    </widget>
    
    <widget name="bomPartMass" type="measure_value_and_unit">
      <labels>
        <label mode="any">label.widget.bompart.mass</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bompart:mass</field>
        <field>bompart:massUnit</field>
      </fields>
    </widget>

    <widget name="bomPartVolume" type="measure_value_and_unit">
      <labels>
        <label mode="any">label.widget.bompart.volume</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bompart:volume</field>
        <field>bompart:volumeUnit</field>
      </fields>
    </widget>
    
    <!--
    <widget name="bomPartSurface" type="measure_value_and_unit">
      <labels>
        <label mode="any">label.widget.bompart.surface</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bompart:surface</field>
        <field>bompart:surfaceUnit</field>
      </fields>
    </widget>
     -->
    <widget name="bomPartStandard" type="suggestOneDirectory">
      <labels>
        <label mode="any">label.widget.bompart.standard</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bompart:standard</field>
      </fields>
      <properties widgetMode="any">
        <property name="directoryName">elora_bomStandard</property>
        <property name="required">false</property>
      </properties>      
    </widget>

    <widget name="bomPartEffectiveDate" type="datetime">
      <labels>
        <label mode="any">label.widget.bompart.effectiveDate</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bompart:effectiveDate</field>
      </fields>
    </widget>
   
    <widget name="bomProdReference" type="text">
      <labels>
        <label mode="any">label.widget.bomprod.productReference</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bomprod:productReference</field>
      </fields>
    </widget>

    <widget name="bomProdClassification" type="suggestOneDirectory">
      <labels>
        <label mode="any">label.widget.bomprod.productClassification</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bomprod:productClassification</field>
      </fields>
      <widgetModes>
        <mode value="view_summary">#{currentDocument.hasSchema('bom_product')?'view':'hidden'}</mode>
      </widgetModes>
      <properties widgetMode="any">
        <property name="directoryName">elora_bomProductClassHierarchical</property>
        <property name="required">false</property>
      </properties>
    </widget>

    <widget name="bomProdUnit" type="text">
      <labels>
        <label mode="any">label.widget.bomprod.unit</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bomprod:unit</field>
      </fields>
    </widget>

    <widget name="bomProdExternalReleaseNumber" type="text">
      <labels>
        <label mode="any">label.widget.bomprod.externalReleaseNumber</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bomprod:externalReleaseNumber</field>
      </fields>
    </widget>

    <widget name="bomProdExternalVersionNumber" type="text">
      <labels>
        <label mode="any">label.widget.bomprod.externalVersionNumber</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bomprod:externalVersionNumber</field>
      </fields>
    </widget>
    
     <widget name="bomToolClassification" type="suggestOneDirectory">
      <labels>
        <label mode="any">label.widget.bomtool.toolClassification</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bomtool:toolClassification</field>
      </fields>
      <widgetModes>
        <mode value="view_summary">#{currentDocument.hasSchema('bom_tool')?'view':'hidden'}</mode>
      </widgetModes>
      <properties widgetMode="any">
        <property name="directoryName">elora_bomToolClassHierarchical</property>
        <property name="required">false</property>
      </properties>
    </widget>

     <widget name="bomPackagingClassification" type="suggestOneDirectory">
      <labels>
        <label mode="any">label.widget.bompackaging.packagingClassification</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bompack:packagingClassification</field>
      </fields>
      <widgetModes>
        <mode value="view_summary">#{currentDocument.hasSchema('bom_packaging')?'view':'hidden'}</mode>
      </widgetModes>
      <properties widgetMode="any">
        <property name="directoryName">elora_bomPackagingClassHierarchical</property>
        <property name="required">false</property>
      </properties>
    </widget>

     <widget name="bomSpecificationClassification" type="suggestOneDirectory">
      <labels>
        <label mode="any">label.widget.bomspecification.specificationClassification</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bomspec:specificationClassification</field>
      </fields>
      <widgetModes>
        <mode value="view_summary">#{currentDocument.hasSchema('bom_specification')?'view':'hidden'}</mode>
      </widgetModes>
      <properties widgetMode="any">
        <property name="directoryName">elora_bomSpecificationClassHierarchical</property>
        <property name="required">false</property>
      </properties>
    </widget>
   
    <widget name="bomManpartResponsible" type="singleUserSuggestion">
      <labels>
        <label mode="any">label.widget.bommanpart.responsible</label>
      </labels>
      <fields>
        <field>bommanpart:responsible</field>
      </fields>
      <properties mode="any">
        <property name="userSuggestionSearchType">USER_TYPE</property>
        <property name="minChars">1</property>
      </properties>
    </widget>

    <widget name="bomManpartManufacturer" type="suggestOneDirectory">
      <labels>
        <label mode="any">label.widget.bommanpart.manufacturer</label>
      </labels>
      <fields>
        <field>bommanpart:manufacturer</field>
      </fields>
      <properties widgetMode="any">
        <property name="directoryName">elora_erpManufacturers</property>
        <property name="required">false</property>
      </properties>      
    </widget>
    
    <widget name="bomManpartManufacturerReference" type="text">
      <labels>
        <label mode="any">label.widget.bommanpart.manufacturerReference</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bommanpart:manufacturerReference</field>
      </fields>
    </widget>
    
    <widget name="bomManufacturerList" type="suggestOneDirectory">
      <labels>
        <label mode="any">label.widget.bommanpart.manufacturer</label>
      </labels>
      <fields>
        <field></field>
      </fields>
      <properties widgetMode="any">
        <property name="directoryName">elora_erpManufacturers</property>
        <property name="required">true</property>
      </properties>
    </widget>
    
    <widget name="bomCustomerList" type="suggestOneDirectory">
      <labels>
        <label mode="any">label.widget.bomcustprod.customer</label>
      </labels>
      <fields>
        <field></field>
      </fields>
      <properties widgetMode="any">
        <property name="directoryName">elora_erpCustomers</property>
        <property name="required">true</property>
      </properties>
    </widget>
  
    <widget name="bomCustprodResponsible" type="singleUserSuggestion">
      <labels>
        <label mode="any">label.widget.bomcustprod.responsible</label>
      </labels>
      <fields>
        <field>bomcustprod:responsible</field>
      </fields>
      <properties mode="any">
        <property name="userSuggestionSearchType">USER_TYPE</property>
        <property name="minChars">1</property>
      </properties>
    </widget>

    <widget name="bomCustprodCustomer" type="suggestOneDirectory">
      <labels>
        <label mode="any">label.widget.bomcustprod.customer</label>
      </labels>
      <fields>
        <field>bomcustprod:customer</field>
      </fields>
      <properties widgetMode="any">
        <property name="directoryName">elora_erpCustomers</property>
        <property name="required">false</property>
      </properties>
    </widget>
    
    <widget name="bomCustprodCustomerReference" type="text">
      <labels>
        <label mode="any">label.widget.bomcustprod.customerReference</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>bomcustprod:customerReference</field>
      </fields>
    </widget>
    
    <widget name="summary_bom_documents" type="summary_related_documents">
      <labels>
        <label mode="any">label.widgetBlock.title.documents</label>
      </labels>
      <properties mode="any">
	      <property name="documentRelations">#{outgoingBomDocumentRelations}</property>
	      <property name="docStatementsInfo">#{eloraRelationActions.outgoingBomDocStatementsInfo}</property>
      </properties>
      <controls mode="any">
        <control name="requireSurroundingForm">true</control>
        <control name="handleLabels">true</control>
      </controls>
    </widget>
    
    <widget name="summary_bom_cad_documents" type="summary_related_documents">
      <labels>
        <label mode="any">label.widgetBlock.title.CadDocuments</label>
      </labels>
      <properties mode="any">
        <property name="documentRelations">#{outgoingBomCadDocumentRelations}</property>
        <property name="docStatementsInfo">#{eloraRelationActions.outgoingBomCadDocStatementsInfo}</property>
      </properties>
      <controls mode="any">
        <control name="requireSurroundingForm">true</control>
        <control name="handleLabels">true</control>
      </controls>
    </widget>
    
    <widget name="summary_bom_has_bom_documents" type="summary_related_documents">
      <labels>
        <label mode="any">label.widgetBlock.title.BomDocuments</label>
      </labels>
      <properties mode="any">
        <property name="documentRelations">#{outgoingBomHasBomRelations}</property>
        <property name="docStatementsInfo">#{bomHasBomRelationBean.outgoingBomHasBomStatementsInfo}</property>
      </properties>
      <controls mode="any">
        <control name="requireSurroundingForm">true</control>
        <control name="handleLabels">true</control>
      </controls>
    </widget>
        
    <!-- treetable widgets -->
    
    
    <widget name="treewidget_bom_icon_reference_title" type="treewidget_icon_reference_title">
      <labels>
        <label mode="any">label.content.header.title</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data</field>
        <field>data.ref</field>
        <field>predicateUri</field>
        <field>comment</field>
        <field>data.elo.reference</field>
        <field>wcDoc</field>
      </fields>
      <properties mode="any">
        <property name="showPredicateTooltip">true</property>
        <property name="predicateVocabulary">elora_bom_predicates</property>
      </properties>
    </widget>
    
    
        <widget name="bom_composition_treetable" type="treetable">
            <labels>
                <label mode="any">label.treetable.bom.composition</label>
            </labels>
            <fields>
                <field>data</field>
            </fields>
            <properties widgetMode="any">
                <property name="treetableLayout">bom_composition_treetable</property>
            </properties>
        </widget>
        
        <widget name="bom_where_used_treetable" type="treetable">
            <labels>
                <label mode="any">label.treetable.bom.whereUsed</label>
            </labels>
            <fields>
                <field>data</field>
            </fields>
            <properties widgetMode="any">
                <property name="treetableLayout">bom_where_used_treetable</property>
            </properties>
        </widget>
    
    <!-- end of treetable widgets -->
    
    
    <widget name="bom_composition_ebom_remove_relation" type="template">
      <labels>
        <label mode="any"></label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>level</field>
        <field>isSpecial</field>
      </fields>
      <properties mode="any">
        <property name="template">
              /widgets/bom_composition_ebom_remove_relation_widget.xhtml
        </property>
      </properties>
    </widget>
    
    
    
    <widget name="listing_bom_classification" type="template">
        <labels>
            <label mode="any">eloraplm.label.bomClassification</label>
        </labels>
        <translated>true</translated>
        <fields>
            <field>data</field>
        </fields>
        <properties widgetMode="any">
            <property name="template">
                /widgets/bom_classification_widget.xhtml
            </property>
        </properties>
    </widget>

    <widget name="bomDocumentRelationButton" type="documentActions">
      <properties widgetMode="view">
        <property name="category">BOM_DOCUMENT_RELATION_BUTTON</property>
        <property name="overallDisplay">horizontal_block</property>
      </properties>
      <controls mode="any">
        <control name="requireSurroundingForm">false</control>
        <control name="gridStyleClass">gridStyle12</control>
      </controls>
    </widget>
    
    <widget name="bomCadDocumentRelationButton" type="documentActions">
      <properties widgetMode="view">
        <property name="category">BOM_CAD_DOCUMENT_RELATION_BUTTON</property>
        <property name="overallDisplay">horizontal_block</property>
      </properties>
      <controls mode="any">
        <control name="requireSurroundingForm">false</control>
        <control name="gridStyleClass">gridStyle12</control>
      </controls>
    </widget>
    
    <widget name="bomPartManufacturerRelationButton" type="documentActions">
      <properties widgetMode="view">
        <property name="category">BOM_PART_MANUFACTURER_RELATION_BUTTON</property>
        <property name="overallDisplay">horizontal_block</property>
      </properties>
      <controls mode="any">
        <control name="requireSurroundingForm">false</control>
        <control name="gridStyleClass">gridStyle12</control>
      </controls>
    </widget>
    
    <widget name="bomProductCustomerRelationButton" type="documentActions">
      <properties widgetMode="view">
        <property name="category">BOM_PRODUCT_CUSTOMER_RELATION_BUTTON</property>
        <property name="overallDisplay">horizontal_block</property>
      </properties>
      <controls mode="any">
        <control name="requireSurroundingForm">false</control>
        <control name="gridStyleClass">gridStyle12</control>
      </controls>
    </widget>
    
    <widget name="bomHasBomRelationButton" type="documentActions">
      <properties widgetMode="view">
        <property name="category">BOM_HAS_BOM_RELATION_BUTTON</property>
        <property name="overallDisplay">horizontal_block</property>
      </properties>
      <controls mode="any">
        <control name="requireSurroundingForm">false</control>
        <control name="gridStyleClass">gridStyle12</control>
      </controls>
    </widget>
    <widget name="bomHasSpecificationRelationButton" type="documentActions">
      <properties widgetMode="view">
        <property name="category">BOM_HAS_SPECIFICATION_RELATION_BUTTON</property>
        <property name="overallDisplay">horizontal_block</property>
      </properties>
      <controls mode="any">
        <control name="requireSurroundingForm">false</control>
        <control name="gridStyleClass">gridStyle12</control>
      </controls>
    </widget>
    

  </extension>
  
  <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager" point="widgettypes">
  
    <!-- New widget type for displaying document type, CAD part type and description -->
        <widgetType name="summary_current_bom_document_types_and_description">
          <configuration>
            <sinceVersion>5.3.1</sinceVersion>
            <title>BOM document type</title>
            <description>
              <p>
                This widget displays the document type, BOM item,  description and classification of the current BOM document.
              </p>
              <p>
                It requires the following variables to be present in the EL context:
                <ul>
                      <li>currentDocument: the current document</li>
                </ul>
              </p>
            </description>
            <handlingLabels>true</handlingLabels> <!-- TODO:: HEMEN FALSE???? -->
            <categories>
              <category>summary</category>
            </categories>
            <supportedModes>
              <mode>view</mode>
            </supportedModes>
            <!-- no configurable properties -->
          </configuration>
          <handler-class>
            org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
          </handler-class>
          <property name="template">
            /widgets/summary/bom_types_and_description_widget_template.xhtml
          </property>
        </widgetType>    
    
  </extension>

</component>  